<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AFRISHOPSTAR</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">

<header class="bg-white shadow p-4 flex justify-between items-center">
  <h1 class="text-2xl font-bold text-orange-600">AFRISHOPSTAR</h1>
  <div>
    üõí Panier: <span id="cart-count">0</span>
    <button onclick="openAuth()" class="ml-4 text-blue-600">Compte</button>
  </div>
</header>

<main class="p-6 max-w-6xl mx-auto">
  <input id="search" class="w-full p-2 border rounded mb-4" placeholder="Rechercher un produit">

  <div id="products" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>

  <div class="mt-6 p-4 bg-white rounded shadow">
    <h2 class="font-bold mb-2">üõí Panier</h2>
    <ul id="cart-items"></ul>
    <button id="clear-cart" class="mt-3 bg-red-500 text-white px-3 py-1 rounded">Vider le panier</button>
  </div>

  <div class="mt-6 flex gap-4">
    <a href="https://forms.gle/9P9XQ4LZWTQ8SyRx5" target="_blank" class="bg-orange-600 text-white px-4 py-2 rounded">Vendre maintenant</a>
    <a href="https://forms.gle/9P9XQ4LZWTQ8SyRx5" target="_blank" class="border px-4 py-2 rounded">Devenir fournisseur</a>
    <a href="app.apk" download class="bg-green-600 text-white px-4 py-2 rounded">T√©l√©charger l'app</a>
  </div>
</main>

<div id="auth" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
  <div class="bg-white p-6 rounded w-80">
    <h3 class="font-bold mb-2">Connexion / Inscription</h3>
    <input id="email" type="email" placeholder="Email" class="w-full border p-2 mb-2">
    <button onclick="login()" class="w-full bg-blue-600 text-white py-2 rounded">Continuer</button>
    <button onclick="closeAuth()" class="mt-2 text-sm text-gray-500">Fermer</button>
  </div>
</div>

<script>
let products = [
  {id:1, name:"Tissu Wax Premium", price:4500},
  {id:2, name:"Smartphone Android", price:85000},
  {id:3, name:"Huile Cosm√©tique Bio", price:12000}
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderProducts(list){
  const p = document.getElementById("products");
  p.innerHTML = "";
  list.forEach(prod=>{
    p.innerHTML += `<div class="bg-white p-4 rounded shadow">
        <h3 class="font-bold">${prod.name}</h3>
        <p>${prod.price} FCFA</p>
        <button onclick="addToCart(${prod.id})" class="mt-2 bg-orange-600 text-white px-3 py-1 rounded">Ajouter</button>
      </div>`;
  });
}

function addToCart(id){
  cart.push(id);
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCart();
}

function updateCart(){
  document.getElementById("cart-count").textContent = cart.length;
  const ul = document.getElementById("cart-items");
  ul.innerHTML = "";
  cart.forEach((id,i)=>{
    const prod = products.find(p=>p.id===id);
    ul.innerHTML += `<li>${prod.name} <button onclick="removeItem(${i})">‚ùå</button></li>`;
  });
}

function removeItem(i){
  cart.splice(i,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCart();
}

document.getElementById("clear-cart").onclick = ()=>{
  cart=[];
  localStorage.removeItem("cart");
  updateCart();
};

document.getElementById("search").oninput = e=>{
  const v = e.target.value.toLowerCase();
  renderProducts(products.filter(p=>p.name.toLowerCase().includes(v)));
};

function openAuth(){ document.getElementById("auth").classList.remove("hidden"); }
function closeAuth(){ document.getElementById("auth").classList.add("hidden"); }
function login(){
  const email = document.getElementById("email").value;
  if(!email) return alert("Email requis");
  localStorage.setItem("user", email);
  alert("Connect√© : "+email);
  closeAuth();
}

renderProducts(products);
updateCart();
</script>
</body>
</html>
